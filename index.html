<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>inventory manager</title>
<script src="tfjs@latest.js"></script>
<script async="" defer="" src="js/lib/store.js"></script>
<script async="" defer="" src="main.js"></script>


<!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="css/libs/materialize.min.css">
    <style>
canvas {
  width:45%;
}
.modelStats {
  height:150px;
  text-align:center;
}
.switch {
     margin: 20px;
    width: 150px;
    display: inline-block;
}
.modelBtn {
  margin:20px;
}
body {
  text-align:center;
}
input {
  width: 40%!important;
    text-align: center;
    margin: 0px 5%!important;
}
svg,video{
      margin: 2.5%;
    width: 45%;
        max-width: 45%;
}
canvas{
  margin: 1.5%;
    width: 45%;
    max-width: 150px;
    border: 1px solid #000000;;
}
        svg {
            width: 100%;
            height: 99%; /* gets rid of scrollbar */
        }
</style>

    <!-- Compiled and minified JavaScript -->
    <script  type="text/javascript" src="js/lib/materialize.min.js"></script>
<script type="text/javascript" src="js/lib/d3.js"></script>

</head>
<body>

<div class="viewGen">

<video id="video" autoplay >
</div>
  </video>
 <div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s3"><a class="active" href="#test2"  onclick="addData()">dataset</a></li>
        <li class="tab col s3"><a href="#test1">model</a></li>
      </ul>
    </div>
    <div id="test1" class="col s12">
<!-- Switch -->
  <div class="switch">
    <label>
      training
      <input type="checkbox">
      <span class="lever"></span>
      testing
    </label>
  </div>

    <a class="waves-effect waves-light btn modelBtn" onclick="train()">start</a>

<div class='modelStats'></div>

  
  </div>
    <div id="test2" class="col s12">

  <div class="dataAdd">
  <canvas class="singleCanvas" onclick="getVideoFrame('single')" width="224" height="224"></canvas>

<canvas class="manyCanvas" onclick="getVideoFrame('many')" width="224" height="224"></canvas>

<input class="testCount" type='number' placeholder="count"/>

    <a class="waves-effect waves-light btn" onclick="train()" disabled>camera sample</a>
<!-- Switch -->

      <span>generate test data</span>
  <div class="switch testDataGen">

    <label>
      off
      <input type="checkbox">
      <span class="lever"></span>
      on
    </label>
  </div>

  </div>
    
    <ul class="collection">
    
  </ul>
  </div>
  </div>

    <script>


// Scale for radius
var xr = d3.scale
        .linear()
        .domain([10, 30])
        .range([20, 50]);

// Scale for random position
var randomPosition = function(d) {
    return Math.random() * 200;
}


var tcColours = ['#FDBB30', '#EE3124', '#EC008C', '#F47521', '#7AC143', '#00B0DD'];
var randomTcColour = function() {
  return Math.floor(Math.random() * tcColours.length);
};


// SVG viewport
var svg = d3.select('.viewGen')
  .append('svg')
    .attr('width', 224)
    .attr('height', 224);

async function update(shape,count) {
  svg.selectAll("*").remove();
    var baseCircle = svg.selectAll('circle');
    var baseRect = svg.selectAll('rect');

// create data
var data = [];
for (var i=0; i < count; i++) {
 data.push(i);
}
console.log(count,data)
    // Bind data
    baseCircle = baseCircle.data(data);
    baseRect = baseRect.data(data);

   function setRect(){
    
    // set the rects
    baseRect.transition()
            .duration(200)
            .attr('width', xr)
            .attr('height', xr)
            .attr('x', randomPosition)
            .attr('y', randomPosition)
            .style('fill', tcColours[randomTcColour()]);

    baseRect.enter()
            .append('rect')
            .attr('width', xr)
            .attr('height', xr)
            .attr('x', randomPosition)
            .attr('y', randomPosition)
            .style('fill', tcColours[randomTcColour()]);


     
   }
  
  function setCirc(){
    // set the circles
    baseCircle.transition()
            .duration(250)
            .attr('r', xr)
            .attr('cx', randomPosition)
            .attr('cy', randomPosition)
            .attr('fill', "none")
            .attr("stroke-width", 4)
            .style('stroke', tcColours[randomTcColour()]);
 
    baseCircle.enter()
            .append('circle')
            .attr('r', xr)
            .attr('cx', randomPosition)
            .attr('cy', randomPosition)
            .attr('fill', "none")
            .attr("stroke-width", 4)
            .style('stroke', tcColours[randomTcColour()]);
  }
  if(shape==1){
 setRect()   
  }else if(shape==2){
setCirc()
  }else{
setRect()
setCirc()
  }
return true;

}



    </script>

</body>
</html>
